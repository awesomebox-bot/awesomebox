#!/usr/bin/env node

require('coffee-script');
var program = require('commander')
  , awesomebox = require('../lib/awesomebox');

program.version(require('../package').version);

awesomebox.Plugins.initialize(function() {
  var commands = Object.keys(awesomebox.commands).sort();

  commands.forEach(function(command) {
    program
      .command(command)
      .description(awesomebox.commands[command].description || command)
      .action(function() {
        awesomebox.commands[command]();
      });
    awesomebox.Plugins.context.wrap(awesomebox.commands, 'command.' + command, command);
  });
  
  var o = program.parse(process.argv);

  if (o.args.length === 0) {
    program.help();
  }
});
